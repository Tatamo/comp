# Visualizer for ゲーム実況者Xのデフラグ
## これは何ですか?
[第2回 RCO日本橋ハーフマラソン 予選](https://rco-contest-2018-qual.contest.atcoder.jp/)
の
[B 問題 - ゲーム実況者Xのデフラグ](https://rco-contest-2018-qual.contest.atcoder.jp/tasks/rco_contest_2018_qual_b)
のビジュアライザです。

* このビジュアライザは[デスクトップ版 Google Chrome ブラウザ](https://www.google.co.jp/chrome/browser/desktop/index.html)の最新バージョン上で動作確認を行っています。全てのブラウザ環境で動作することを保証していません。特に、Internet Explorer 上では動作しないことが確認されています。
* このビジュアライザ上で計算された得点は、当コンテストでの得点ではありません。解答を AtCoder 上で提出する事によって採点が行われます。また、ビジュアライザ上で計算された得点は、当コンテスト上での得点を保証するものではありません。
* このビジュアライザを使用したことで発生したトラブルには対応できません。ご了承ください。

## 使い方

* このリポジトリを Clone か Download し、`visualizer.html` をブラウザで開き起動します。
* 画面上部の `入力ファイル` と `出力ファイル` に、ジェネレータが生成したファイルと、あなたのプログラムが出力した内容のファイルを指定します。
* `RUN` ボタンを押します。
* エラーが無ければ、右上の「点数」にスコアが表示されます。
* エラーがある場合は、エラーメッセージが表示されます。

## 表示の見方

### コスト色モード
セクタにデータが置いてある場合に、前のデータがあるセクタから移動してくるコストと、次のデータがあるセクタに移動するコストの和を色として表現する表示モードです。

コストが高いと赤く表示され、コストが低くなるに従い <font color="darkred">暗い赤</font> → <font color="red">赤</font> → <font color="orange">オレンジ</font> → <font color="yellow">黄色</font> → <font color="greenyellow">黄緑</font> → <font color="green">緑</font> → <font color="greenblue">青緑</font> → <font color="blue">青</font> と変化していきます。

### データ色モード
セクタに置いてあるデータを、その順序に従い色を付けて表現する表示モードです。

データの先頭から色相環の <font color="yellow">黄色</font> → <font color="red">赤</font> の色を割り当てて表示します。

### 線を描画
そのターンに移動させたセクタに存在するデータから、前後のデータの場所への線を描画します。
なお、オンにした状態では描画に時間がかかるため、再生が遅くなります。

### 描画内容を画像として保存
png 形式の画像として保存できます。SNS でシェアして SNS 映えしましょう。

## tips
* 矢印キー左右でコマ送りができます。
* 指定された出力ファイルが更新された場合、再度出力ファイルを指定し直すこと無く `RUN` を押すだけで新しい内容でビジュアライザが動作します。(ブラウザ依存)
* エラーメッセージは JavaScript Console にも出力されています。

## 開発メモ
* 軽くするためにとにかく差分処理を頑張っています
    * 内部データは 10 ターン毎に KeyFrame を設け、KeyFrame では初期盤面からの累積差分を、KeyFrame の間では KeyFrame からの累積差分を持つようにしています。
    * 全マスの再描画をするととても遅いので、前後1ターンの移動では差分描画をしています。
    * 毎ターンスコアを全部計算すると遅い(1ターンごとに O(D)) ので、前のターンとのスコア差を O(1) で計算しています。

## LICENSE
* (C) Recruit Communications Co., Ltd.
* ライセンスは MIT-License です。
